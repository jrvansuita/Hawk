<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <%  include ../../menus/main-menu %>
  <meta charset="utf-8">

  <link rel="stylesheet" type="text/css" href="/front/css/layout/shipping-order.css">
  <script type="text/javascript" src="/front/js/control/shipping-order/shipping-order.js"></script>
  <script type="text/javascript" src="/util/local.js"></script>
  <script type="text/javascript" src="/front/js/libs/request-helper.js"></script>
  <script type="text/javascript" src="/front/js/libs/beep.js"></script>



</head>
<body>
  <%  include ../../menus/packing-menu %>

  <%
  var situationsArr = {0: 'Em Aberto', 1:'Coletado', 2 : 'Enviado'};

  %>

  <script class="hidable-script">
  window.shippingOrder = <%- JSON.stringify(shippingOrder || null) %>
  </script>



  <div class="main-content">

    <div class="header-holder shadow">
      <table >
        <tr>
          <td>
            <div class="field shipping-order-col">
              <label class="field-title">Ordem de Coleta</label>
              <label class="info highlighted"><%=shippingOrder ? shippingOrder.numeroColeta : ''%>  <span class="field-title itens-count-display"> </span></label>
            </div>
          </td>

          <td>
            <div class="field">
              <label class="field-title">Estados</label>
              <label class="ufs-list"></label>
            </div>
          </td>

          <td>
            <div class="field">
              <label class="field-title">Data</label>
              <label class="info"><%=shippingOrder ? Dat.format(new Date(shippingOrder.data)) : Dat.format(new Date())%></label>
            </div>
          </td>

          <td>
            <div class="status-holder">
              <div class="field skrink">
                <label class="field-title">Usuário</label>
                <label class="info"><%=shippingOrder ? shippingOrder.usuario_criacao || (loggedUser ? loggedUser.name : '---') : ''%></label>
              </div>
            </div>
          </td>

          <td>
            <div class="status-holder">
              <%
              var statusIcon = shippingOrder.situacao == 0 ? 'checked' : (shippingOrder.situacao == 1 ? 'transport/default' : 'question-mark');

              %>
              <img class="circle shadow icon" src="/img/<%=statusIcon%>.png" onerror="this.src='/img/transport/question-mark.png'" />

              <div class="field skrink">
                <label class="field-title">Situação</label>
                <label class="info"><%=shippingOrder ? situationsArr[parseInt(shippingOrder.situacao)] : ''%></label>
              </div>
            </div>
          </td>

          <td>
            <div class="status-holder">
              <img class="circle shadow icon" src="/img/<%=shippingOrder ?  'transport/' + Util.transportName(shippingOrder.transportador).toLowerCase() : 'default'%>.png" onerror="this.src='/img/transport/default.png'" />

              <div class="field skrink">
                <label class="field-title">Transportadora</label>
                <label class="info"><%=shippingOrder ? Util.transportName(shippingOrder.transportador) : ''%></label>
              </div>
            </div>
          </td>

          <td>
            <div class="status-holder">
              <div class="field skrink">
                <label class="field-title">Peso</label>
                <label class="info wei-val"></label>
              </div>
            </div>
          </td>

          <td>
            <div class="status-holder">
              <div class="field skrink">
                <label class="field-title">Valor</label>
                <label class="info total-val"></label>
              </div>
            </div>
          </td>
        </tr>
      </table>

    </div>










    <%if (shippingOrder.situacao == 0){%>
      <div class="middle-line shadow">
        <div class="progress-line"> <div class="progress-line inner"> </div></div>

        <div class="middle-line-inner">

          <div class="left-middle-line">



            <div class="nf-input-holder">
              <div class="nf-input-and-icon">
                <img class="circle shadow icon"  id="nf-icon" class="nf-icon" src="/img/scan-barcode.png" />
                <input type="text" id="nf"  class="simple-material-input%>" placeholder="Nota Fiscal"   onkeypress="return Num.isNumberKey(event);" required/>
                <span id="progress"></span>
              </div>
              <label class="nf-msg"></label>
            </div>

          </div>

          <div class="right-middle-line">
            <div class="buttons-holder">

              <label class="button shadow" id="save" tabindex="0">Salvar</label>
            </div>
          </div>


        </div>

      </div>

      <%}%>



      <div class="nfs-in-holder nfs-table-holder shadow"></div>

    </div>

  </body>
  </html>
